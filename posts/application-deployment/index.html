<!DOCTYPE html><html lang="en"><meta charset="utf-8"><meta content="IE=edge"http-equiv="X-UA-Compatible"><meta content="width=device-width,minimum-scale=1,initial-scale=1"name="viewport"><link href=""rel="shortcut icon"type="image/x-icon"><link href=""rel="icon"type="image/x-icon"><title>Application Deployment - Shane Logsdon</title><meta content="Application Deployment"property="og:title"><meta content="You may have experience in deploying your Ruby or .NET applications, but when it comes to Elixir, do you have what it takes to deploy your app? Learn the essentials for getting your application from development to production."name="description"><meta content="You may have experience in deploying your Ruby or .NET applications, but when it comes to Elixir, do you have what it takes to deploy your app? Learn the essentials for getting your application from development to production."property="og:description"><link href="https://shane.logsdon.io/posts/application-deployment/"rel="canonical"><meta content="https://shane.logsdon.io/posts/application-deployment/"property="og:url"><meta content="Shane Logsdon"property="og:site_name"><meta content="https://shane.logsdon.io//assets/images/water-against-cliffs.jpeg"property="og:image"><meta content="article"property="og:type"><meta content="2014-08-25T04:00:00.000Z"property="article:published_time"><link href="https://shane.logsdon.io/posts/http-and-me/"rel="next"title="HTTP and Me"><meta content="summary_large_image"name="twitter:card"><meta content="@shanelogsdon"name="twitter:site"><meta content="@shanelogsdon"name="twitter:creator"><script type="application/ld+json">{"@context": "http://schema.org","@type": "BlogPosting","headline": "Application Deployment","image": "https://shane.logsdon.io//assets/images/water-against-cliffs.jpeg","datePublished": "2014-08-25T04:00:00.000Z","dateModified": "2014-08-25T04:00:00.000Z","description": "You may have experience in deploying your Ruby or .NET applications, but when it comes to Elixir, do you have what it takes to deploy your app? Learn the essentials for getting your application from development to production.","author": {"@type": "Person","name": "Shane Logsdon","image": "https://s.gravatar.com/avatar/033132c341296d7f5e5b41e871178418?s=60"},"publisher": {"@type": "Organization","name": "Shane Logsdon","logo": {"@type": "ImageObject","url": "https://s.gravatar.com/avatar/033132c341296d7f5e5b41e871178418?s=60","width": "60","height": "60"}},"mainEntityOfPage": "https://shane.logsdon.io/posts/application-deployment/","url": "https://shane.logsdon.io/posts/application-deployment/"}</script><link href=""rel="alternate"type="application/rss+xml"title="Shane Logsdon"><style>.dn{display:none}.sans-serif{font-family:-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica,helvetica neue,ubuntu,roboto,noto,segoe ui,arial,sans-serif}.normal{font-weight:400}.b{font-weight:700}.lh-copy{line-height:1.5}.tl{text-align:left}.tc{text-align:center}.f2{font-size:2.25rem}.f4{font-size:1.25rem}.f6{font-size:.875rem}.measure{max-width:30em}.di{display:inline}.db{display:block}.dib{display:inline-block}.pl1{padding-left:.25rem}.pb3{padding-bottom:1rem}.pv2{padding-top:.5rem;padding-bottom:.5rem}.ma1{margin:.25rem}.ma3{margin:1rem}.mb1,.mv1{margin-bottom:.25rem}.mr3{margin-right:1rem}.mt3{margin-top:1rem}.mv1{margin-top:.25rem}.mv3{margin-top:1rem;margin-bottom:1rem}.mv4{margin-top:2rem;margin-bottom:2rem}.w-100{width:100%}.ba{border-style:solid;border-width:1px}.bt{border-top-style:solid;border-top-width:1px}.bb{border-bottom-style:solid;border-bottom-width:1px}.b--black-10{border-color:rgba(0,0,0,.1)}.black-70{color:rgba(0,0,0,.7)}.black-50{color:rgba(0,0,0,.5)}.black-30{color:rgba(0,0,0,.3)}.list{list-style-type:none}@media screen and (min-width:30em){.v-top-ns{vertical-align:top}.dib-ns{display:inline-block}}@media screen and (min-width:60em){.f1-l{font-size:3rem}.f3-l{font-size:1.5rem}.dn-l{display:none}.dib-l{display:inline-block}.ml3-l{margin-left:1rem}.ml4-l{margin-left:2rem}.mt1-l{margin-top:.25rem}.mv4-l{margin-top:2rem;margin-bottom:2rem}.mv5-l{margin-top:4rem;margin-bottom:4rem}.w-20-l{width:20%}.w-50-l{width:50%}.bn-l{border-style:none;border-width:0}}</style><body class="fira-code sans-serif"><div class="w-100 dib-l ml4-l sub-header w-50-l"><div class="b--black-10 tc w-100 ba dn-l"><a href="#menu"class="w-100 black-30 db pv2">menu</a></div><main class="content"><article class="post"itemscope itemtype="http://schema.org/BlogPosting"><header class="header"><meta itemprop="mainEntityOfPage"itemtype="https://schema.org/WebPage"itemid="https://shane.logsdon.io/posts/application-deployment/"itemscope><h1 class="title f1-l f2 lh-title mb1 measure-wide mt4"itemprop="name headline">Application Deployment</h1><div class="meta"><time class="f6 black-50"datetime="2014-08-25T04:00:00.000Z"itemprop="datePublished">Published: Aug 25th, 2014 </time><time class="f6 black-50"datetime="2017-01-31T06:17:08.000Z"itemprop="dateModified"></time> <span itemprop="author"itemscope itemtype="http://schema.org/Person"><meta content="Shane Logsdon"itemprop="name"></span><span itemprop="publisher"itemscope itemtype="http://schema.org/Organization"><meta content="Shane Logsdon"itemprop="name"><span itemprop="logo"itemscope itemtype="http://schema.org/ImageObject"><meta content="https://s.gravatar.com/avatar/033132c341296d7f5e5b41e871178418?s=60"itemprop="url"><meta content="60"itemprop="width"itemtype="https://schema.org/Distance"><meta content="60"itemprop="height"itemtype="https://schema.org/Distance"></span></span><span itemprop="image"itemscope itemtype="http://schema.org/ImageObject"><meta content="https://s.gravatar.com/avatar/033132c341296d7f5e5b41e871178418?s=60"itemprop="url"><meta content="60"itemprop="width"itemtype="https://schema.org/Distance"><meta content="60"itemprop="height"itemtype="https://schema.org/Distance"></span></div></header><section class="content lh-copy"itemprop="articleBody"><p>The deployment of Elixir applications. You may have experience in deploying your Ruby or .NET applications, but when it comes to Elixir, do you have what it takes to deploy your app? Learn the essentials for getting your application from development to production.</p><a id="more"></a><h3 id="Requirements"><a href="#Requirements"class="headerlink"title="Requirements"></a>Requirements</h3><p>Deployment is great and all, but be sure you have these things before continuing:<ul><li>Application<li>Build environment<li>Hosting environment</ul><blockquote><p><strong>Psst!</strong> Your hosting environment and your build environment can be one in the same if you’re doing a test run.</blockquote><p>Be sure that the architectures for both your build and hosting environments are the same, e.g. 64-bit Linux -> 64-bit Linux. Without doing this, you run the risk of your application not running. Using a virtual machine for your build environment that mirrors your hosting environment will be an easy way to ensure you don’t have any such problems when deploying your application.<h3 id="Goals"><a href="#Goals"class="headerlink"title="Goals"></a>Goals</h3><p>Our main goal for this guide is to generate a release, using <a href="https://github.com/bitwalker/exrm"rel="external"target="_blank">Elixir Release Manager</a> (exrm) and deploy it to our hosting environment. Once we have our application running, we will discuss steps needed to expose it to the world.<h2 id="Overview"><a href="#Overview"class="headerlink"title="Overview"></a>Overview</h2><p>Let’s separate our goals into a few tasks of which we can keep track:<ol><li>Add exrm as a dependency<li>Generate our first release<li>Deploy our release to our hosting environment<li>Expose our application</ol><h2 id="The-new-dependency-in-town"><a href="#The-new-dependency-in-town"class="headerlink"title="The new dependency in town"></a>The new dependency in town</h2><p>To get started, we’ll need to add exrm into our list of dependencies. With later versions of Elixir, we just need to add <code>{ :exrm, "~> 0.14.7" }</code> to have <a href="https://hex.pm"rel="external"target="_blank">hex</a> download everything correctly. Here’s an example:<figure class="highlight elixir"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">deps</span></span> <span class="keyword">do</span></div><div class="line">  [ { <span class="symbol">:plug</span>, <span class="string">"~> 0.7.0"</span> },</div><div class="line">    { <span class="symbol">:cowboy</span>, <span class="string">"~> 1.0.0"</span> },</div><div class="line">    { <span class="symbol">:exrm</span>, <span class="string">"~> 0.14.7"</span> } ]</div><div class="line"><span class="keyword">end</span></div></pre></table></figure><p>With that taken care of, a simple <code>mix do deps.get, deps.compile</code> will pull down exrm and its dependencies, along with the rest of your application’s dependencies, and ensures that everything compiles so exrm’s mix tasks are available as well. Speaking of…<pre><code>$ mix help
mix                   # Run the default task (current: mix run)
...
mix release           # Build a release for the current mix application.
mix release.clean     # Clean up any release-related files.
mix release.plugins   # View information about active release plugins
mix run               # Run the given file or expression
mix test              # Run a project's tests
iex -S mix            # Start IEx and run the default task
</code></pre><p>Bam! Now we’re cooking with fire!<h2 id="Our-first-release"><a href="#Our-first-release"class="headerlink"title="Our first release"></a>Our first release</h2><h3 id="Setup"><a href="#Setup"class="headerlink"title="Setup"></a>Setup</h3><p>Update our <code>mix.exs</code> file to have all dependencies listed under <code>applications</code> in the application function:<figure class="highlight elixir"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">application</span></span> <span class="keyword">do</span></div><div class="line">  [ <span class="symbol">mod:</span> { MyApp, [] },</div><div class="line">    <span class="symbol">applications:</span> [ <span class="symbol">:plug</span>, <span class="symbol">:cowboy</span> ] ]</div><div class="line"><span class="keyword">end</span></div></pre></table></figure><p>Doing so helps us overcome one of <a href="https://github.com/bitwalker/exrm#common-issues"rel="external"target="_blank">exrm’s common issues</a> by helping exrm know of all our dependencies so that it can properly bundle them into our release. When not completed, our application will probably alert us of missing modules or of a failure to start a child application when we go to run our release.<p>Even if you list all of your dependencies, your application may still fail, typically because one of your dependencies does not properly list its own dependencies. A quick fix for this is to include the missing dependency in your list of applications. You should create an issue or a pull request to that project’s repo to help the community, but it isn’t necessary.<p>Add our application’s router as a child to our application’s supervisor:<figure class="highlight elixir"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">init</span></span>([]) <span class="keyword">do</span></div><div class="line">  children = [</div><div class="line">    worker(MyApp.Router, [], <span class="symbol">function:</span> <span class="symbol">:start</span>)</div><div class="line">  ]</div><div class="line"></div><div class="line">  <span class="comment"># See http://elixir-lang.org/docs/stable/elixir/Supervisor.html</span></div><div class="line">  <span class="comment"># for other strategies and supported options</span></div><div class="line">  supervise(children, <span class="symbol">strategy:</span> <span class="symbol">:one_for_one</span>)</div><div class="line"><span class="keyword">end</span></div></pre></table></figure><blockquote><p><strong>Warning!</strong> The <code>phoenix.start</code> mix task will stop working once that worker is in your application’s supervisor tree because <code>MyApp.Router.start</code> would be started twice, resulting in a failure from the second operation. To easily bring up a development server, run <code>iex -S mix</code>, which will give you a running application and an <code>iex</code> console as well.</blockquote><h3 id="Generating-the-release"><a href="#Generating-the-release"class="headerlink"title="Generating the release"></a>Generating the release</h3><p>Running <code>mix release</code> will kick off the build process for our release.<blockquote><p><strong>Note:</strong> In the following sections, you’ll see our application’s version (<code>0.0.1</code>) pop up in bunch of places. This value is pulled from the application’s <code>mix.exs</code> file, under the project’s version.</blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ mix release</div><div class="line">==> Generating relx configuration...</div><div class="line">==> Generating sys.config...</div><div class="line">==> Generating boot script...</div><div class="line">==> Performing protocol consolidation...</div><div class="line">==> Conform: Loading schema...</div><div class="line">==> Conform: No schema found, conform will not be packaged in this release!</div><div class="line">==> Generating release...</div><div class="line">===> Application metadata file exists but is malformed: /Users/shane/elixir/lib/mix/test/fixtures/deps_status/_build/dev/lib/invalidapp/ebin/invalidapp.app</div><div class="line">===> Application metadata file exists but is malformed: /Users/shane/elixir/lib/mix/test/fixtures/deps_status/_build/dev/lib/invalidvsn/ebin/invalidvsn.app</div><div class="line">===> Application metadata file exists but is malformed: /Users/shane/elixir/lib/mix/test/fixtures/deps_status/_build/dev/lib/ok/ebin/ok.app</div><div class="line">==> Generating nodetool...</div><div class="line">==> Packaging release...</div><div class="line">==> The release for my_app-0.0.1 is ready!</div></pre></table></figure><p>After a bit, you will start to see exrm’s output to the console. Exrm uses a set of default configuration options when building your application that will work for most applications (they say 99%). If you end up needing advanced configuration abilities, checkout <a href="https://github.com/bitwalker/exrm#configuration"rel="external"target="_blank">exrm’s configuration section</a> for some awesome details about this process.<p>Once we see <code>==> The release for my_app-0.0.1 is ready!</code> pop up in our console, our release is complete! You may be asking yourself, “Where’s the release? What’s this <code>rel</code> directory?” Let’s take a look!<h4 id="Contents-of-a-release"><a href="#Contents-of-a-release"class="headerlink"title="Contents of a release"></a>Contents of a release</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ ls -la rel/my_app</div><div class="line">total 21488</div><div class="line">drwxr-xr-x   7 shane  staff       238 Aug 22 10:03 .</div><div class="line">drwxr-xr-x   3 shane  staff       102 Aug 22 10:03 ..</div><div class="line">drwxr-xr-x   6 shane  staff       204 Aug 22 10:03 bin</div><div class="line">drwxr-xr-x   8 shane  staff       272 Aug 22 10:03 erts-6.1</div><div class="line">drwxr-xr-x  21 shane  staff       714 Aug 22 10:03 lib</div><div class="line">drwxr-xr-x   5 shane  staff       170 Aug 22 10:03 releases</div><div class="line">-rw-r--r--   1 shane  staff  10999433 Aug 22 10:03 my_app-0.0.1.tar.gz</div></pre></table></figure><p><code>bin</code> contains our generated executables for running our application. The <code>bin/my_app</code> executable is what we will eventually use to issue commands to our application.<p><code>erts-6.1</code> contains all necessary files for the Erlang run-time system, pulled from our build environment.<p><code>lib</code> contains the compiled BEAM files for our applicaiton and all of our dependencies. This is where all of your hard work goes.<p><code>releases</code> is the home for our releases, being used to house any release-dependent configurations and scripts that exrm finds necessary for running our application.<p>The tarball is our release in archive form, ready to be shipped off to our hosting environment.<h3 id="Testing-our-release"><a href="#Testing-our-release"class="headerlink"title="Testing our release"></a>Testing our release</h3><p>Before deploying our release, we should make sure that it runs on our build environment. To do that, we will issue the <code>console</code> command to our executable, essentially running our application via <code>iex</code>.<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ rel/my_app/bin/my_app console</div><div class="line">Exec: /Users/shane/code/elixir/my_app/rel/my_app/erts-6.1/bin/erlexec -boot /Users/shane/code/elixir/my_app/rel/my_app/releases/0.0.1/my_app -env ERL_LIBS /Users/shane/code/elixir/my_app/rel/my_app/lib -config /Users/shane/code/elixir/my_app/rel/my_app/releases/0.0.1/sys.config -pa /Users/shane/code/elixir/my_app/rel/my_app/lib/consolidated -args_file /Users/shane/code/elixir/my_app/rel/my_app/releases/0.0.1/vm.args -user Elixir.IEx.CLI -extra --no-halt +iex -- console</div><div class="line">Root: /Users/shane/code/elixir/my_app/rel/my_app</div><div class="line">/Users/shane/code/elixir/my_app/rel/my_app</div><div class="line">Erlang/OTP 17 [erts-6.1] [source-d2a4c20] [64-bit] [smp:4:4] [async-threads:10] [hipe] [kernel-poll:false]</div><div class="line"></div><div class="line">Interactive Elixir (0.15.2-dev) - press Ctrl+C to exit (type h() ENTER for help)</div><div class="line">iex(my_app@127.0.0.1)1></div></pre></table></figure><p>This is the point where your application will crash if it fails to start a child application. However, if all goes well, you should be dropped into an <code>iex</code> prompt. Congratulations! We’re ready to deploy our application!<h2 id="Deploy-Deploy"><a href="#Deploy-Deploy"class="headerlink"title="Deploy! Deploy!"></a>Deploy! Deploy!</h2><p>Now comes the easy part! There are many ways for us to get our tarballed release to our hosting environment, so you have a bit of free reign in this step.<p>In our example, we’ll use SCP to upload to a remote server.<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ scp -i ~/.ssh/id_rsa.pub rel/my_app/my_app-0.0.1.tar.gz ubuntu@hostname.com:/home/ubuntu</div><div class="line">my_app-0.0.1.tar.gz                100%   18MB  80.0KB/s   03:48</div></pre></table></figure><p>Hooray! Let’s SSH into that environment to set our application up.<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ ssh -i ~/.ssh/id_rsa.pub ubuntu@hostname.com</div><div class="line">$ sudo mkdir -p /app</div><div class="line">$ sudo chown ubuntu:ubuntu /app</div><div class="line">$ cd /app</div><div class="line">$ tar xfz /home/ubuntu/my_app-0.0.1.tar.gz</div></pre></table></figure><p>See? I told you it would be easy.<h2 id="Expose"><a href="#Expose"class="headerlink"title="Exposè"></a>Exposè</h2><p>We’re getting close. Can you feel it?<h3 id="Set-up-our-init-system"><a href="#Set-up-our-init-system"class="headerlink"title="Set up our init system"></a>Set up our init system</h3><p>First step in exposing our application to the world is ensuring that our application is running in case of a system restart, expected or unexpected. To do this, we will need to create an init script for our hosting environment’s init system, be it <code>systemd</code>, <code>upstart</code>, or whatever.<p>In this case, we’ll be using <code>upstart</code> as our OS is Ubuntu, and <code>upstart</code> has been bundled with Ubuntu since 6.10. Let’s edit our init script with <code>sudo vi /etc/init/my_app.conf</code><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">description "my_app"</div><div class="line"></div><div class="line">## Uncomment the following two lines to run the</div><div class="line">## application as www-data:www-data</div><div class="line">#setuid www-data</div><div class="line">#setgid www-data</div><div class="line"></div><div class="line">start on startup</div><div class="line">stop on shutdown</div><div class="line"></div><div class="line">respawn</div><div class="line"></div><div class="line">env MIX_ENV=prod</div><div class="line">env PORT=8888</div><div class="line">export MIX_ENV</div><div class="line">export PORT</div><div class="line"></div><div class="line">exec /bin/sh /app/bin/my_app start</div></pre></table></figure><p>Here, we’ve told <code>upstart</code> a few basic things about how we want it to handle our application. If you need to know how to do somthing in particular, take a look at the <a href="http://upstart.ubuntu.com/cookbook/"rel="external"target="_blank"><code>upstart</code> cookbook</a> for loads of information on it. We’ll kick off the first start of our application with <code>sudo start my_app</code>.<p>One key point to notice is that we’re instructing <code>upstart</code> to run our release’s <code>bin/my_app start</code> command, which boostraps our application and runs it as a daemon.<h4 id="exrm-commands"><a href="#exrm-commands"class="headerlink"title="exrm commands"></a>exrm commands</h4><p>Along with the <code>start</code> command, exrm bundles a few others with our application that are equally useful. Check out the <a href="https://github.com/bitwalker/exrm"rel="external"target="_blank">exrm docs</a> for details on what’s possible.<h5 id="ping"><a href="#ping"class="headerlink"title="ping"></a><code>ping</code></h5><p>The <code>ping</code> command is a great sanity check when you need to ensure your application is running:<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ bin/my_app ping</div><div class="line">pong</div></pre></table></figure><p>Or to see if it isn’t:<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ bin/my_app ping</div><div class="line">Node 'my_app@127.0.0.1' not responding to pings.</div></pre></table></figure><h5 id="remote-console"><a href="#remote-console"class="headerlink"title="remote_console"></a><code>remote_console</code></h5><p><code>remote_console</code> will be your friend when debugging is in order. It allows you to attach an IEx console to your running application. When closing the console, your application continues to run.<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ bin/my_app remote_console</div><div class="line">Erlang/OTP 17 [erts-6.1] [source-d2a4c20] [64-bit] [smp:4:4] [async-threads:10] [hipe] [kernel-poll:false]</div><div class="line"></div><div class="line">Interactive Elixir (0.15.2-dev) - press Ctrl+C to exit (type h() ENTER for help)</div><div class="line">iex(my_app@127.0.0.1)1></div></pre></table></figure><h5 id="upgrade"><a href="#upgrade"class="headerlink"title="upgrade"></a><code>upgrade</code></h5><p>Although at the time of writing (25 Aug 2014) there is an <a href="https://github.com/bitwalker/exrm/issues/56"rel="external"target="_blank">open issue with upgrading an app with exrm</a>, the <code>upgrade</code> command allows you to upgrade your application to a newer codebase without downtime. Awesome, right?<h5 id="stop"><a href="#stop"class="headerlink"title="stop"></a><code>stop</code></h5><p>You may run into situations where your application needs to stop. Look no further than the <code>stop</code> command.<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ bin/my_app stop</div><div class="line">ok</div></pre></table></figure><h3 id="Set-up-our-web-server"><a href="#Set-up-our-web-server"class="headerlink"title="Set up our web server"></a>Set up our web server</h3><p>In a lot of cases, you’re going to have more than one application running in your hosting environment, all of which might need to be accessible on port 80. Since only one application can listen on a single port at a time, we need to use something to proxy our application. You will typically see Apache (with <code>mod_proxy</code> enabled) or nginx used for this, and we’ll be setting up nginx in this case.<p>Let’s create our config file for our application. By default, everything in <code>/etc/nginx/sites-enabled</code> is included into the main <code>/etc/nginx/nginx.conf</code> file that is used to configure nginx’s runtime environment. Standard practice is to create our file in <code>/etc/nginx/sites-available</code> and make a symbolic link to it in <code>/etc/nginx/sites-enabled</code>.<blockquote><p><strong>Note:</strong> These points hold true for Apache as well, but the steps to accomplish them are slightly different.</blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ sudo touch /etc/nginx/sites-available/my_app</div><div class="line">$ sudo ln -s /etc/nginx/sites-available /etc/nginx/sites-enabled</div><div class="line">$ sudo vi /etc/nginx/sites-available/my_app</div></pre></table></figure><p>Contents of our <code>/etc/nginx/sites-available/my_app</code> file:<figure class="highlight"><table><tr><td class="code"><pre><div class="line">upstream my_app {</div><div class="line">    server 127.0.0.1:8888;</div><div class="line">}</div><div class="line">server{</div><div class="line">    listen 80;</div><div class="line">    server_name .hostname.com;</div><div class="line"></div><div class="line">    location / {</div><div class="line">        try_files $uri @proxy;</div><div class="line">    }</div><div class="line"></div><div class="line">    location @proxy {</div><div class="line">        include proxy_params;</div><div class="line">        proxy_redirect off;</div><div class="line">        proxy_pass http://my_app;</div><div class="line">    }</div><div class="line">}</div></pre></table></figure><p>Like our <code>upstart</code> script, this nginx config is basic. Look to the <a href="http://wiki.nginx.org/Main"rel="external"target="_blank">nginx wiki</a> for steps to configure any more involved features. Restart nginx with <code>sudo service nginx restart</code> to load our new config.<p>At this point, we should be able to see our application if we visit <code>http://hostname.com/</code> if everything has been successful up to this point.</p><script>var classes={".content a":["black-70"],".content p, .content ul, .content ol":["measure"],".post .content > p:first-of-type":["f4"],".content blockquote":["ml3","pl3","bl","b--black-10","bw4"]};for(var selector in classes)if(classes.hasOwnProperty(selector)){var contents=document.querySelectorAll(selector);Array.prototype.slice.call(contents).map(function(t){classes[selector].map(function(e){t.classList.add(e)})})}</script></section><footer class="b--black-10 bt bb mt4 post-footer"><p class="meta tags"><span class="label">tags:</span> <a href=""class="black-70 ml3">functional programming</a> <a href=""class="black-70 ml3">elixir</a> <a href=""class="black-70 ml3">deployment</a> <a href=""class="black-70 ml3">exrm</a></footer></article></main><footer class="mv4 footer db-l dn"><p class="dib mr3 copyright"><small>© 2017 Shane Logsdon</small><p class="dib mr3 rss-subscribe"><small>subscribe <a href="/feed.xml"class="black-70">via RSS</a></small><p class="dib mr3 toggle-ligatures"><small><a href="javascript:toggleLigatures();"class="black-70">toggle code ligatures</a></small><script>function toggleLigatures(){return-1===document.body.className.indexOf("fira-code")?void(document.body.className+=" fira-code"):void(document.body.className=document.body.className.replace(" fira-code",""))}</script></footer></div><header class="b--black-10 bt bn-l dib-ns f6 fl-l header lh-copy ml3-l mt1-l mt3 tc v-top-ns w-100 w-20-l"><div class="mv4 mv5-l"><a href="/"class="black-70 b f3-l f4"title="Home"id="menu">Shane Logsdon<div><small class="f6 normal">Polyglot Developer</small></div></a></div><nav class="b--black-10 bt bb mv4 mv5-l page-nav"><ul class="list pl1"><li class="di"><a href="/"class="black-70 mr3 page-link">Home</a><li class="di"><a href="/posts/"class="black-70 mr3 page-link">Posts</a><li class="di"><a href="/projects/"class="black-70 mr3 page-link">Projects</a><li class="di"><a href="/presentations/"class="black-70 mr3 page-link">Presentations</a><li class="di"><a href="/about/"class="black-70 mr3 page-link">About</a></ul></nav><p class="mv4-l description ma3">I develop things. Sometimes, I write about them here. Let's start a conversation.<nav class="mv3 interaction-nav pb3"><ul class="list contact-list tl"><li class="mv1">Email me: <a href="mailto:shane@logsdon.io"class="black-70"rel="noopener"target="_blank">shane@logsdon.io</a><li class="mv1">Develop with me: <a href="https://github.com/slogsdon"class="black-70"title="GitHub"rel="noopener"target="_blank">slogsdon</a><li class="mv1">Tweet me: <a href="https://twitter.com/shanelogsdon"class="black-70"title="Twitter"rel="noopener"target="_blank">shanelogsdon</a></ul></nav><nav class="mv3 mv4-l tag-nav">Tags<ul class="list tag-list tj"><li class="dib ma1"><a href="/tag/net/"class="black-70">.net</a><li class="dib ma1"><a href="/tag/acvte/"class="black-70">acvte</a><li class="dib ma1"><a href="/tag/apache/"class="black-70">apache</a><li class="dib ma1"><a href="/tag/api/"class="black-70">api</a><li class="dib ma1"><a href="/tag/authentication/"class="black-70">authentication</a><li class="dib ma1"><a href="/tag/azure/"class="black-70">azure</a><li class="dib ma1"><a href="/tag/bcrypt/"class="black-70">bcrypt</a><li class="dib ma1"><a href="/tag/chicagoboss/"class="black-70">chicagoboss</a><li class="dib ma1"><a href="/tag/csharp/"class="black-70">csharp</a><li class="dib ma1"><a href="/tag/deployment/"class="black-70">deployment</a><li class="dib ma1"><a href="/tag/devops/"class="black-70">devops</a><li class="dib ma1"><a href="/tag/docker/"class="black-70">docker</a><li class="dib ma1"><a href="/tag/elixir/"class="black-70">elixir</a><li class="dib ma1"><a href="/tag/erlang/"class="black-70">erlang</a><li class="dib ma1"><a href="/tag/exrm/"class="black-70">exrm</a><li class="dib ma1"><a href="/tag/fsharp/"class="black-70">fsharp</a><li class="dib ma1"><a href="/tag/functional-programming/"class="black-70">functional programming</a><li class="dib ma1"><a href="/tag/genevent/"class="black-70">genevent</a><li class="dib ma1"><a href="/tag/golang/"class="black-70">golang</a><li class="dib ma1"><a href="/tag/hardware/"class="black-70">hardware</a><li class="dib ma1"><a href="/tag/haskell/"class="black-70">haskell</a><li class="dib ma1"><a href="/tag/homebrew/"class="black-70">homebrew</a><li class="dib ma1"><a href="/tag/http/"class="black-70">http</a><li class="dib ma1"><a href="/tag/javascript/"class="black-70">javascript</a><li class="dib ma1"><a href="/tag/linux/"class="black-70">linux</a><li class="dib ma1"><a href="/tag/mandrill/"class="black-70">mandrill</a><li class="dib ma1"><a href="/tag/migration/"class="black-70">migration</a><li class="dib ma1"><a href="/tag/mysql/"class="black-70">mysql</a><li class="dib ma1"><a href="/tag/nginx/"class="black-70">nginx</a><li class="dib ma1"><a href="/tag/obtvse2/"class="black-70">obtvse2</a><li class="dib ma1"><a href="/tag/payments/"class="black-70">payments</a><li class="dib ma1"><a href="/tag/percona/"class="black-70">percona</a><li class="dib ma1"><a href="/tag/phalcon/"class="black-70">phalcon</a><li class="dib ma1"><a href="/tag/php/"class="black-70">php</a><li class="dib ma1"><a href="/tag/rails/"class="black-70">rails</a><li class="dib ma1"><a href="/tag/redirects/"class="black-70">redirects</a><li class="dib ma1"><a href="/tag/review/"class="black-70">review</a><li class="dib ma1"><a href="/tag/ruby/"class="black-70">ruby</a><li class="dib ma1"><a href="/tag/rust/"class="black-70">rust</a><li class="dib ma1"><a href="/tag/sockets/"class="black-70">sockets</a><li class="dib ma1"><a href="/tag/talk/"class="black-70">talk</a><li class="dib ma1"><a href="/tag/testing/"class="black-70">testing</a><li class="dib ma1"><a href="/tag/vagrant/"class="black-70">vagrant</a><li class="dib ma1"><a href="/tag/wordpress/"class="black-70">wordpress</a><li class="dib ma1"><a href="/tag/workshop/"class="black-70">workshop</a></ul></nav></header><footer class="mv4 footer db dn-l"><p class="dib mr3 copyright"><small>© 2017 Shane Logsdon</small><p class="dib mr3 rss-subscribe"><small>subscribe <a href="/feed.xml"class="black-70">via RSS</a></small><p class="dib mr3 toggle-ligatures"><small><a href="javascript:toggleLigatures();"class="black-70">toggle code ligatures</a></small><script>function toggleLigatures(){return-1===document.body.className.indexOf("fira-code")?void(document.body.className+=" fira-code"):void(document.body.className=document.body.className.replace(" fira-code",""))}</script></footer><noscript id="deferred-styles"><link href="/assets/css/main.css"rel="stylesheet"media="all"></noscript><script>var loadDeferredStyles=function(){var e=document.getElementById("deferred-styles"),t=document.createElement("div");t.innerHTML=e.textContent,document.body.appendChild(t),e.parentElement.removeChild(e)},raf=requestAnimationFrame||mozRequestAnimationFrame||webkitRequestAnimationFrame||msRequestAnimationFrame;raf?raf(function(){window.setTimeout(loadDeferredStyles,0)}):window.addEventListener("load",loadDeferredStyles)</script>