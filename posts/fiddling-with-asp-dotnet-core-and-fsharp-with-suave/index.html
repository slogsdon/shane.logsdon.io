<!DOCTYPE html><html lang="en"><meta charset="utf-8"><meta content="IE=edge"http-equiv="X-UA-Compatible"><meta content="width=device-width,minimum-scale=1,initial-scale=1"name="viewport"><link href=""rel="shortcut icon"type="image/x-icon"><link href=""rel="icon"type="image/x-icon"><title>Fiddling with ASP.NET Core and F# with Suave - Shane Logsdon</title><meta content="Fiddling with ASP.NET Core and F# with Suave"property="og:title"><meta content="Suave is a possible replacement for the ASP.NET stack, but with some help, the two can be used together to build composable F# web applications."name="description"><meta content="Suave is a possible replacement for the ASP.NET stack, but with some help, the two can be used together to build composable F# web applications."property="og:description"><link href="https://shane.logsdon.io/posts/fiddling-with-asp-dotnet-core-and-fsharp-with-suave/"rel="canonical"><meta content="https://shane.logsdon.io/posts/fiddling-with-asp-dotnet-core-and-fsharp-with-suave/"property="og:url"><meta content="Shane Logsdon"property="og:site_name"><meta content=""property="og:image"><meta content="article"property="og:type"><meta content="2017-01-23T04:00:25.000Z"property="article:published_time"><link href="https://shane.logsdon.io/posts/asp-dotnet-core-webapi-in-azure-app-service/"rel="next"title="ASP.NET Core WebAPI in Azure App Service"><meta content="summary"name="twitter:card"><meta content="@shanelogsdon"name="twitter:site"><meta content="@shanelogsdon"name="twitter:creator"><script type="application/ld+json">{"@context": "http://schema.org","@type": "BlogPosting","headline": "Fiddling with ASP.NET Core and F# with Suave","image": "https://s.gravatar.com/avatar/033132c341296d7f5e5b41e871178418?s=60","datePublished": "2017-01-23T04:00:25.000Z","dateModified": "2017-01-23T04:00:25.000Z","description": "Suave is a possible replacement for the ASP.NET stack, but with some help, the two can be used together to build composable F# web applications.","author": {"@type": "Person","name": "Shane Logsdon","image": "https://s.gravatar.com/avatar/033132c341296d7f5e5b41e871178418?s=60"},"publisher": {"@type": "Organization","name": "Shane Logsdon","logo": {"@type": "ImageObject","url": "https://s.gravatar.com/avatar/033132c341296d7f5e5b41e871178418?s=60","width": "60","height": "60"}},"mainEntityOfPage": "https://shane.logsdon.io/posts/fiddling-with-asp-dotnet-core-and-fsharp-with-suave/","url": "https://shane.logsdon.io/posts/fiddling-with-asp-dotnet-core-and-fsharp-with-suave/"}</script><link href=""rel="alternate"type="application/rss+xml"title="Shane Logsdon"><style>.dn{display:none}.sans-serif{font-family:-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica,helvetica neue,ubuntu,roboto,noto,segoe ui,arial,sans-serif}.normal{font-weight:400}.b{font-weight:700}.lh-copy{line-height:1.5}.tl{text-align:left}.tc{text-align:center}.f2{font-size:2.25rem}.f4{font-size:1.25rem}.f6{font-size:.875rem}.measure{max-width:30em}.di{display:inline}.db{display:block}.dib{display:inline-block}.pl1{padding-left:.25rem}.pb3{padding-bottom:1rem}.pv2{padding-top:.5rem;padding-bottom:.5rem}.ma1{margin:.25rem}.ma3{margin:1rem}.mb1,.mv1{margin-bottom:.25rem}.mr3{margin-right:1rem}.mt3{margin-top:1rem}.mv1{margin-top:.25rem}.mv3{margin-top:1rem;margin-bottom:1rem}.mv4{margin-top:2rem;margin-bottom:2rem}.w-100{width:100%}.ba{border-style:solid;border-width:1px}.bt{border-top-style:solid;border-top-width:1px}.bb{border-bottom-style:solid;border-bottom-width:1px}.b--black-10{border-color:rgba(0,0,0,.1)}.black-70{color:rgba(0,0,0,.7)}.black-50{color:rgba(0,0,0,.5)}.black-30{color:rgba(0,0,0,.3)}.list{list-style-type:none}@media screen and (min-width:30em){.v-top-ns{vertical-align:top}.dib-ns{display:inline-block}}@media screen and (min-width:60em){.f1-l{font-size:3rem}.f3-l{font-size:1.5rem}.dn-l{display:none}.dib-l{display:inline-block}.ml3-l{margin-left:1rem}.ml4-l{margin-left:2rem}.mt1-l{margin-top:.25rem}.mv4-l{margin-top:2rem;margin-bottom:2rem}.mv5-l{margin-top:4rem;margin-bottom:4rem}.w-20-l{width:20%}.w-50-l{width:50%}.bn-l{border-style:none;border-width:0}}</style><body class="fira-code sans-serif"><div class="w-100 dib-l ml4-l sub-header w-50-l"><div class="b--black-10 tc w-100 ba dn-l"><a href="#menu"class="w-100 black-30 db pv2">menu</a></div><main class="content"><article class="post"itemscope itemtype="http://schema.org/BlogPosting"><header class="header"><meta itemprop="mainEntityOfPage"itemtype="https://schema.org/WebPage"itemid="https://shane.logsdon.io/posts/fiddling-with-asp-dotnet-core-and-fsharp-with-suave/"itemscope><h1 class="title f1-l f2 lh-title mb1 measure-wide mt4"itemprop="name headline">Fiddling with ASP.NET Core and F# with Suave</h1><div class="meta"><time class="f6 black-50"datetime="2017-01-23T04:00:25.000Z"itemprop="datePublished">Published: Jan 22nd, 2017 </time><time class="f6 black-50"datetime="2017-01-31T06:17:08.000Z"itemprop="dateModified">Updated: Jan 31st, 2017 </time><span itemprop="author"itemscope itemtype="http://schema.org/Person"><meta content="Shane Logsdon"itemprop="name"></span><span itemprop="publisher"itemscope itemtype="http://schema.org/Organization"><meta content="Shane Logsdon"itemprop="name"><span itemprop="logo"itemscope itemtype="http://schema.org/ImageObject"><meta content="https://s.gravatar.com/avatar/033132c341296d7f5e5b41e871178418?s=60"itemprop="url"><meta content="60"itemprop="width"itemtype="https://schema.org/Distance"><meta content="60"itemprop="height"itemtype="https://schema.org/Distance"></span></span><span itemprop="image"itemscope itemtype="http://schema.org/ImageObject"><meta content="https://s.gravatar.com/avatar/033132c341296d7f5e5b41e871178418?s=60"itemprop="url"><meta content="60"itemprop="width"itemtype="https://schema.org/Distance"><meta content="60"itemprop="height"itemtype="https://schema.org/Distance"></span></div></header><section class="content lh-copy"itemprop="articleBody"><p>ASP.NET is a great framework for building web applications. It’s tried and trusted, fully extensible, has a great community, and thanks to .NET Core, supported across Linux, MacOS, and Windows. Being built with .NET, we have the wise option of building our application with F#, but without intervention, we’d be stuck with using the object-oriented C# types that are throughout ASP.NET.<h2 id="The-Setup"><a href="#The-Setup"class="headerlink"title="The Setup"></a>The Setup</h2><p>To overcome this, we’ll leverage <a href="https://suave.io/"rel="external"target="_blank">Suave</a>, which can be a full replacement for ASP.NET, and <a href="https://github.com/dustinmoris/Suave.AspNetCore"rel="external"target="_blank"><code>Suave.AspNetCore</code></a> to tie the two together. Let’s start with a generated project thanks to <a href="https://github.com/OmniSharp/generator-aspnet"rel="external"target="_blank"><code>yo aspnet</code></a> and the <code>Web API Application (F#)</code> template it provides, stripping out some of the template’s defaults to have a blank slate. We’ll still have some of that object-oriented C# feel, but it will be restricted to the console application:<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line"><span class="keyword">open</span> System.IO</div><div class="line"><span class="keyword">open</span> Microsoft.Extensions.Configuration</div><div class="line"><span class="keyword">open</span> Microsoft.AspNetCore.Hosting</div><div class="line"><span class="keyword">open</span> ProjectName</div><div class="line"></div><div class="line"><span class="meta">[&lt;EntryPoint>]</span></div><div class="line"><span class="keyword">let</span> main argv =</div><div class="line">  <span class="keyword">let</span> config = ConfigurationBuilder()</div><div class="line">                  .AddCommandLine(argv)</div><div class="line">                  .AddEnvironmentVariables(<span class="string">"ASPNETCORE_"</span>)</div><div class="line">                  .Build()</div><div class="line"></div><div class="line">  <span class="keyword">let</span> host = WebHostBuilder()</div><div class="line">                  .UseConfiguration(config)</div><div class="line">                  .UseKestrel()</div><div class="line">                  .UseContentRoot(Directory.GetCurrentDirectory())</div><div class="line">                  .UseIISIntegration()</div><div class="line">                  .UseStartup&lt;Http.Startup>()</div><div class="line">                  .Build()</div><div class="line">  host.Run()</div><div class="line">  <span class="number">0</span> <span class="comment">// exit code</span></div></pre></table></figure><p>and a minimal <code>Startup</code> class:<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line"><span class="keyword">namespace</span> ProjectName</div><div class="line"></div><div class="line"><span class="keyword">open</span> Microsoft.AspNetCore.Builder</div><div class="line"><span class="keyword">open</span> Microsoft.AspNetCore.Hosting</div><div class="line"><span class="keyword">open</span> Microsoft.Extensions.DependencyInjection</div><div class="line"><span class="keyword">open</span> Microsoft.Extensions.Logging</div><div class="line"><span class="keyword">open</span> Suave.AspNetCore</div><div class="line"></div><div class="line"><span class="keyword">module</span> Http =</div><div class="line">  <span class="class"><span class="keyword">type</span> <span class="title">Startup</span></span>() =</div><div class="line">    <span class="keyword">member</span> this.ConfigureServices (services : IServiceCollection) = ()</div><div class="line"></div><div class="line">    <span class="keyword">member</span> this.Configure (app : IApplicationBuilder, env : IHostingEnvironment, loggerFactory : ILoggerFactory) =</div><div class="line">      app.UseSuave(App.app) |> ignore</div></pre></table></figure><p><code>Suave.AspNetCore</code> exposes a <code>UseSuave</code> extension method on ASP.NET’s <code>ApplicationBuilder</code> that acts as the connection point between ASP.NET and Suave. Overall, <code>Suave.AspNetCore</code> accomplishes this connection through two main pieces:<ol><li>A <code>SuaveMiddleware</code> that implements <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware"rel="external"target="_blank">ASP.NET Middleware</a>‘s method signatures<li>A bi-directional mapping between ASP.NET’s <code>HttpContext</code> and Suave’s <code>HttpContext</code></ol><p>We can use Suave’s API to control request/response pipeline from here, sticking to full F# and Suave’s <code>HttpContext</code> (opposed to the ASP.NET <code>HttpContext</code>).<h2 id="Why-all-this-trouble"><a href="#Why-all-this-trouble"class="headerlink"title="Why all this trouble?"></a>Why all this trouble?</h2><p>We’re going through this setup to leverage one of Suave’s core principles: the <code>WebPart</code>. From Suave’s documentation:<blockquote><p>A web part is a thing that acts on a HttpContext, the web part could fail by returning <code>None</code> or succeed and produce a new HttpContext. Each web part can execute asynchronously, and it’s not until it is evaluated that the async is evaluated. It will be evaluated on the same fibre (asynchronous execution context) that is consuming from the browser’s TCP socket.</blockquote><p><code>WebPart</code>s give two benefits, composability (combining small pieces into larger ones) and asynchronism (which also aids in composability). In essence, it’s type boils down to this (which is useful to know as your editor may display either the left-hand side or the right-hand side depending on how F# infers the type for a given expression):<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">type</span> <span class="title">WebPart</span> </span>= HttpContext -> Async&lt;HttpContext option></div></pre></table></figure><p>where each <code>WebPart</code> accepts Suave’s <code>HttpContext</code> and returns an async option. The option is what gives applications the ability to control execution flow. When execution of a code path should stop, the <code>WebPart</code> will return <code>None</code>, but otherwise, it will return <code>Some httpContext</code> with a new <code>HttpContext</code> with any desired updates. Because this process is wrapped in <code>async</code>, we aren’t penalized too much as our application decides how to handle an incoming request.<blockquote><p>One note to make is that instead of F#’s normal function composition operator (<code>>></code>), Suave exposes a fish operator (<code>>=></code>) to aid in working with <code>WebPart</code>s and removes some necessary handling of <code>Async&lt;HttpContext option></code> that aids developer productivity. We’ll see this operator in action later on as we build up our application.</blockquote><h2 id="Composing-an-application"><a href="#Composing-an-application"class="headerlink"title="Composing an application"></a>Composing an application</h2><p>For now, let’s just begin with a small starter <code>WebPart</code>, thanks to <code>OK</code>:<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line">namepsace ProjectName</div><div class="line"></div><div class="line"><span class="keyword">open</span> Suave</div><div class="line"><span class="keyword">open</span> Helpers</div><div class="line"><span class="keyword">open</span> Suave.Filters</div><div class="line"><span class="keyword">open</span> Suave.Operators</div><div class="line"><span class="keyword">open</span> Suave.RequestErrors</div><div class="line"><span class="keyword">open</span> Suave.Successful</div><div class="line"></div><div class="line"><span class="keyword">module</span> App =</div><div class="line">  <span class="keyword">let</span> hello name = OK (<span class="string">"hello "</span> + name)</div><div class="line">  <span class="keyword">let</span> app = hello <span class="string">"world"</span></div></pre></table></figure><p>As our application grows, we’ll use <code>choose</code> to facilitate paths a request may take and <code>path</code> to filter part of the decision tree based on request path. Here, we add some basic routes:<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line"><span class="keyword">module</span> App =</div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> app =</div><div class="line">    choose [</div><div class="line">      path <span class="string">"/"</span> >=> hello <span class="string">"world"</span></div><div class="line">      path <span class="string">"/api"</span> >=> NO_CONTENT</div><div class="line">      path <span class="string">"/api/users"</span> >=> OK <span class="string">"users"</span></div><div class="line">    ]</div></pre></table></figure><p>Not only can we use these combinators to create a decision tree to route requests, we can also create a <code>WebPart</code>s to set a header or affect the context other ways:<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line"><span class="keyword">module</span> App =</div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> setServerHeader =</div><div class="line">    Writers.setHeader <span class="string">"server"</span> <span class="string">"kestrel + suave"</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> app =</div><div class="line">    setServerHeader</div><div class="line">    >=> choose [</div><div class="line">      <span class="comment">// ...</span></div><div class="line">    ]</div></pre></table></figure><p>We’ve added <code>setServerHeader</code> in our <code>app</code> expression at the top level, but it would be just as happy deeper in the expression. <code>path</code> can prevent further combinators from affecting the response, so if <code>setServerHeader</code> is added after a <code>path</code> expression (or some similar combinator), the response will only have the header set if that part of the decision tree is successfull. For instance, with:<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line"><span class="keyword">module</span> App =</div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> app =</div><div class="line">    choose [</div><div class="line">      path <span class="string">"/server"</span> >=> setServerHeader >=> OK <span class="string">"server"</span></div><div class="line">      path <span class="string">"/no-server"</span> >=> OK <span class="string">"no-server"</span></div><div class="line">    ]</div></pre></table></figure><p>responses for <code>/server</code> will have the <code>Server</code> header set with the value <code>kestrel + suave</code>, while responses for <code>/no-server</code> will have the default value set for the <code>Server</code> header, thanks to the <code>WebPart</code> type (remember, it returns an <code>Async&lt;HttpContext option></code>).<p>We can also use <code>WebPart</code>s to compose multiple application segments, introducing some order as our application grows:<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line"><span class="keyword">module</span> App =</div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> api =</div><div class="line">    Writers.setMimeType <span class="string">"""application/json; charset="utf-8";"""</span></div><div class="line">    >=> choose [</div><div class="line">          path <span class="string">"/api"</span> >=> NO_CONTENT</div><div class="line">          path <span class="string">"/api/users"</span> >=> OK <span class="string">"""{"api": "users"}"""</span></div><div class="line">        ]</div><div class="line"></div><div class="line">  <span class="keyword">let</span> web =</div><div class="line">    choose [</div><div class="line">      path <span class="string">"/"</span> >=> hello <span class="string">"world"</span></div><div class="line">      pathScan <span class="string">"/hello/%s"</span> hello</div><div class="line">    ]</div><div class="line"></div><div class="line">  <span class="keyword">let</span> app = [ api; web; ]</div></pre></table></figure><h2 id="Iterating-improvements"><a href="#Iterating-improvements"class="headerlink"title="Iterating improvements"></a>Iterating improvements</h2><p>Let’s see if we can clean up <code>api</code> to remove some duplication. I saw this pattern out on the web at some point:<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line"><span class="keyword">module</span> Paths =</div><div class="line">  <span class="keyword">module</span> Api =</div><div class="line">    <span class="keyword">let</span> root = <span class="string">"/api"</span></div><div class="line">    <span class="keyword">let</span> users = root + <span class="string">"/users"</span></div><div class="line"></div><div class="line"><span class="keyword">module</span> App =</div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> api =</div><div class="line">    Writers.setMimeType <span class="string">"""application/json; charset="utf-8";"""</span></div><div class="line">    >=> choose [</div><div class="line">          path Paths.Api.root >=> NO_CONTENT</div><div class="line">          path Paths.Api.users >=> OK <span class="string">"""{"api": "users"}"""</span></div><div class="line">        ]</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div></pre></table></figure><p>I like the separation here, but honestly, I’m not sure it helps the situation much. We still have a similar problem, plus the additional code for managing the paths. Still not acceptable in my book, so lets try something else. My next inclination is to attempt to nest <code>path</code> expressions:<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line"><span class="keyword">module</span> App =</div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> api =</div><div class="line">    Writers.setMimeType <span class="string">"""application/json; charset="utf-8";"""</span></div><div class="line">    >=> path <span class="string">"/api"</span></div><div class="line">    >=> choose [</div><div class="line">          path <span class="string">""</span> >=> NO_CONTENT</div><div class="line">          path <span class="string">"/users"</span> >=> OK <span class="string">"""{"api": "users"}"""</span></div><div class="line">        ]</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div></pre></table></figure><p>Sadly, this doesn’t work as expected and results in a <code>404 Not Found</code>. I wasn’t lucky in looking for an official solution yet, but are custom combinators an option? Let’s try to build one. Here’s what <code>path</code>‘s implementation looks like:<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> path s (x : HttpContext) =</div><div class="line">  <span class="comment">// `iff` was internalized to simplify for display here</span></div><div class="line">  <span class="keyword">let</span> iff b x =</div><div class="line">    <span class="keyword">if</span> b <span class="keyword">then</span> Some x <span class="keyword">else</span> None</div><div class="line">  async.Return (iff (s = x.request.path) x)</div></pre></table></figure><p>Essentially, it checks the path given to <code>path</code> against the request’s path, returning <code>None</code> if there’s no match. For our custom combinators, we’ll need to check the request path against the string passed to our new <code>path</code> as well as the path set above it. <code>HttpContext</code> has a <code>userState</code> field, meant for storing state information within a single request, perfect for our use-case of storing info about the entire path for a given code path. Here are our new combinators:<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line"><span class="keyword">module</span> App =</div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> optionally pred value =</div><div class="line">    <span class="keyword">if</span> pred <span class="keyword">then</span> Some value <span class="keyword">else</span> None</div><div class="line"></div><div class="line">  <span class="keyword">let</span> getCurrentRoot ctx =</div><div class="line">    <span class="keyword">match</span> ctx.userState.TryFind(<span class="string">"rootPath"</span>) <span class="keyword">with</span></div><div class="line">    | None -> <span class="string">""</span></div><div class="line">    | Some p -> string p</div><div class="line"></div><div class="line">  <span class="keyword">let</span> rootPath (part : string) (ctx : HttpContext) =</div><div class="line">    <span class="keyword">let</span> root = getCurrentRoot ctx</div><div class="line">    { ctx <span class="keyword">with</span> userState = ctx.userState.Add(<span class="string">"rootPath"</span>, root + part) }</div><div class="line">    |> Some</div><div class="line">    |> async.Return</div><div class="line"></div><div class="line">  <span class="keyword">let</span> subPath (part : string) (ctx : HttpContext) =</div><div class="line">    <span class="keyword">let</span> fullPath = (getCurrentRoot ctx) + part</div><div class="line">    ctx</div><div class="line">    |> optionally (fullPath = ctx.request.path)</div><div class="line">    |> async.Return</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div></pre></table></figure><p><code>rootPath</code> allows us to specify a path prefix for <code>subPath</code> calls specified deeper in the decision tree. Because <code>rootPath</code> stores any previous root path concatenated with the supplied value, we luckily get nesting support beyond a single level. Here’s a simple example, clearing up our previous <code>api</code> expression:<figure class="fsharp highlight"><table><tr><td class="code"><pre><div class="line"><span class="keyword">module</span> App =</div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> api =</div><div class="line">    Writers.setMimeType <span class="string">"""application/json; charset="utf-8";"""</span></div><div class="line">    >=> rootPath <span class="string">"/api"</span></div><div class="line">    >=> choose [</div><div class="line">          subPath <span class="string">""</span> >=> NO_CONTENT</div><div class="line">          subPath <span class="string">"/users"</span> >=> OK <span class="string">"""{"api": "users"}"""</span></div><div class="line">        ]</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div></pre></table></figure><blockquote><p>I’m looking to contribute this functionality for inclusion into Suave’s API and am currently <a href="https://github.com/SuaveIO/suave/issues/570"rel="external"target="_blank">awating feedback from the team</a>.</blockquote><h2 id="Take-aways"><a href="#Take-aways"class="headerlink"title="Take aways"></a>Take aways</h2><p>.NET Core is still relatively new when compared to the mainstream .NET Framework. Because of this, Suave’s support for it is still in progress (only two of seven additional official packages provide .NET Core support), and community extension of its .NET Core support is still improving (<code>Suave.AspNetCore</code> doesn’t yet support all of Suave’s feature set). As the community progress .NET Core support for F# and its projects, this relative newness feeling should diminish, and Suave + F# applications on the ASP.NET Core stack should be ready for production.<p>That being said, there’s no reason Suave cannot be used with ASP.NET Core in projects where 100% compatibility isn’t required. Personal projects, one-off projects, etc. would, in my opinion, give you a chance to use Suave and ASP.NET Core together in a lower-risk situation.</p><script>var classes={".content a":["black-70"],".content p, .content ul, .content ol":["measure"],".post .content > p:first-of-type":["f4"],".content blockquote":["ml3","pl3","bl","b--black-10","bw4"]};for(var selector in classes)if(classes.hasOwnProperty(selector)){var contents=document.querySelectorAll(selector);Array.prototype.slice.call(contents).map(function(t){classes[selector].map(function(e){t.classList.add(e)})})}</script></section><footer class="b--black-10 bt bb mt4 post-footer"><p class="meta tags"><span class="label">tags:</span> <a href=""class="black-70 ml3">.net</a> <a href=""class="black-70 ml3">fsharp</a></footer></article></main><footer class="mv4 footer db-l dn"><p class="dib mr3 copyright"><small>© 2017 Shane Logsdon</small><p class="dib mr3 rss-subscribe"><small>subscribe <a href="/feed.xml"class="black-70">via RSS</a></small><p class="dib mr3 toggle-ligatures"><small><a href="javascript:toggleLigatures();"class="black-70">toggle code ligatures</a></small><script>function toggleLigatures(){return-1===document.body.className.indexOf("fira-code")?void(document.body.className+=" fira-code"):void(document.body.className=document.body.className.replace(" fira-code",""))}</script></footer></div><header class="b--black-10 bt bn-l dib-ns f6 fl-l header lh-copy ml3-l mt1-l mt3 tc v-top-ns w-100 w-20-l"><div class="mv4 mv5-l"><a href="/"class="black-70 b f3-l f4"title="Home"id="menu">Shane Logsdon<div><small class="f6 normal">Polyglot Developer</small></div></a></div><nav class="b--black-10 bt bb mv4 mv5-l page-nav"><ul class="list pl1"><li class="di"><a href="/"class="black-70 mr3 page-link">Home</a><li class="di"><a href="/posts/"class="black-70 mr3 page-link">Posts</a><li class="di"><a href="/projects/"class="black-70 mr3 page-link">Projects</a><li class="di"><a href="/presentations/"class="black-70 mr3 page-link">Presentations</a><li class="di"><a href="/about/"class="black-70 mr3 page-link">About</a></ul></nav><p class="mv4-l description ma3">I develop things. Sometimes, I write about them here. Let's start a conversation.<nav class="mv3 interaction-nav pb3"><ul class="list contact-list tl"><li class="mv1">Email me: <a href="mailto:shane@logsdon.io"class="black-70"rel="noopener"target="_blank">shane@logsdon.io</a><li class="mv1">Develop with me: <a href="https://github.com/slogsdon"class="black-70"title="GitHub"rel="noopener"target="_blank">slogsdon</a><li class="mv1">Tweet me: <a href="https://twitter.com/shanelogsdon"class="black-70"title="Twitter"rel="noopener"target="_blank">shanelogsdon</a></ul></nav><nav class="mv3 mv4-l tag-nav">Tags<ul class="list tag-list tj"><li class="dib ma1"><a href="/tag/net/"class="black-70">.net</a><li class="dib ma1"><a href="/tag/acvte/"class="black-70">acvte</a><li class="dib ma1"><a href="/tag/apache/"class="black-70">apache</a><li class="dib ma1"><a href="/tag/api/"class="black-70">api</a><li class="dib ma1"><a href="/tag/authentication/"class="black-70">authentication</a><li class="dib ma1"><a href="/tag/azure/"class="black-70">azure</a><li class="dib ma1"><a href="/tag/bcrypt/"class="black-70">bcrypt</a><li class="dib ma1"><a href="/tag/chicagoboss/"class="black-70">chicagoboss</a><li class="dib ma1"><a href="/tag/csharp/"class="black-70">csharp</a><li class="dib ma1"><a href="/tag/deployment/"class="black-70">deployment</a><li class="dib ma1"><a href="/tag/devops/"class="black-70">devops</a><li class="dib ma1"><a href="/tag/docker/"class="black-70">docker</a><li class="dib ma1"><a href="/tag/elixir/"class="black-70">elixir</a><li class="dib ma1"><a href="/tag/erlang/"class="black-70">erlang</a><li class="dib ma1"><a href="/tag/exrm/"class="black-70">exrm</a><li class="dib ma1"><a href="/tag/fsharp/"class="black-70">fsharp</a><li class="dib ma1"><a href="/tag/functional-programming/"class="black-70">functional programming</a><li class="dib ma1"><a href="/tag/genevent/"class="black-70">genevent</a><li class="dib ma1"><a href="/tag/golang/"class="black-70">golang</a><li class="dib ma1"><a href="/tag/hardware/"class="black-70">hardware</a><li class="dib ma1"><a href="/tag/haskell/"class="black-70">haskell</a><li class="dib ma1"><a href="/tag/homebrew/"class="black-70">homebrew</a><li class="dib ma1"><a href="/tag/http/"class="black-70">http</a><li class="dib ma1"><a href="/tag/javascript/"class="black-70">javascript</a><li class="dib ma1"><a href="/tag/linux/"class="black-70">linux</a><li class="dib ma1"><a href="/tag/mandrill/"class="black-70">mandrill</a><li class="dib ma1"><a href="/tag/migration/"class="black-70">migration</a><li class="dib ma1"><a href="/tag/mysql/"class="black-70">mysql</a><li class="dib ma1"><a href="/tag/nginx/"class="black-70">nginx</a><li class="dib ma1"><a href="/tag/obtvse2/"class="black-70">obtvse2</a><li class="dib ma1"><a href="/tag/payments/"class="black-70">payments</a><li class="dib ma1"><a href="/tag/percona/"class="black-70">percona</a><li class="dib ma1"><a href="/tag/phalcon/"class="black-70">phalcon</a><li class="dib ma1"><a href="/tag/php/"class="black-70">php</a><li class="dib ma1"><a href="/tag/rails/"class="black-70">rails</a><li class="dib ma1"><a href="/tag/redirects/"class="black-70">redirects</a><li class="dib ma1"><a href="/tag/review/"class="black-70">review</a><li class="dib ma1"><a href="/tag/ruby/"class="black-70">ruby</a><li class="dib ma1"><a href="/tag/rust/"class="black-70">rust</a><li class="dib ma1"><a href="/tag/sockets/"class="black-70">sockets</a><li class="dib ma1"><a href="/tag/talk/"class="black-70">talk</a><li class="dib ma1"><a href="/tag/testing/"class="black-70">testing</a><li class="dib ma1"><a href="/tag/vagrant/"class="black-70">vagrant</a><li class="dib ma1"><a href="/tag/wordpress/"class="black-70">wordpress</a><li class="dib ma1"><a href="/tag/workshop/"class="black-70">workshop</a></ul></nav></header><footer class="mv4 footer db dn-l"><p class="dib mr3 copyright"><small>© 2017 Shane Logsdon</small><p class="dib mr3 rss-subscribe"><small>subscribe <a href="/feed.xml"class="black-70">via RSS</a></small><p class="dib mr3 toggle-ligatures"><small><a href="javascript:toggleLigatures();"class="black-70">toggle code ligatures</a></small><script>function toggleLigatures(){return-1===document.body.className.indexOf("fira-code")?void(document.body.className+=" fira-code"):void(document.body.className=document.body.className.replace(" fira-code",""))}</script></footer><noscript id="deferred-styles"><link href="/assets/css/main.css"rel="stylesheet"media="all"></noscript><script>var loadDeferredStyles=function(){var e=document.getElementById("deferred-styles"),t=document.createElement("div");t.innerHTML=e.textContent,document.body.appendChild(t),e.parentElement.removeChild(e)},raf=requestAnimationFrame||mozRequestAnimationFrame||webkitRequestAnimationFrame||msRequestAnimationFrame;raf?raf(function(){window.setTimeout(loadDeferredStyles,0)}):window.addEventListener("load",loadDeferredStyles)</script>